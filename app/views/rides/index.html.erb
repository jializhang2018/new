<h2 class="my-3 p-3 bg-primary text-white">Rides In Progress</h2>

<div class="row">
  <div class="col-sm-12">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>From</th><th>To</th><th>Passenger</th><th>Driver</th>
        </tr>
      </thead>
      <tbody>
        <% for ride in Ride.all.order("created_at desc") %>
          <% if ride.complete == false %>
            <% if ride.driver_id == -1 %>
              <tr>
                <td><%= ride.origin %></td>
                <td><%= ride.destination %></td>
                <td><b><%= ride.passenger_name %></b><br><i> Received: <%=ride.created_at.strftime("%m/%d/%y %I:%M%p")%></i></td>
                <td><a href="/drivers?ride_id=<%=ride.id%>" class="btn-sm btn-info">Assign Driver</a></td>
              </tr>
            <% else %>
              <tr>
                <td><%= ride.origin %></td>
                <td><%= ride.destination %></td>
                <td><b><%= ride.passenger_name %></b><br><i> Received: <%=ride.created_at.strftime("%m/%d/%y %I:%M%p")%></i></td>
                <td><%=link_to "Mark as Complete", {:controller => "rides", :action => "update", :id => ride.id, :driver_id => ride.driver_id, :name => "complete"}  , :method=> :put %><br><i> Assigned: <%=ride.updated_at.strftime("%m/%d/%y %I:%M%p")%></i></td>
              </tr>
            <% end %>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
